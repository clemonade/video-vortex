<div class="flex flex-col items-center">
  <ion-segment [formControl]="form.controls.category">
    @for (category of CATEGORIES; track $index) {
      <ion-segment-button [value]="category">
        <ion-label>{{ CATEGORY_TYPE_TEXT_MAP[category] }}</ion-label>
      </ion-segment-button>
    }
  </ion-segment>

  <div class="flex gap-4 items-center">
    <div>
      <ion-picker>
        <app-picker-column [formControl]="form.controls.type">
          @if (form.controls.category.value === 'runtime') {
            @for (type of RUNTIME_TYPES; track $index) {
              <ion-picker-column-option [value]="type">{{ CATEGORY_TYPE_TEXT_MAP[type] }}</ion-picker-column-option>
            }
          }
          @if (form.controls.category.value === 'money') {
            @for (type of MONEY_TYPES; track $index) {
              <ion-picker-column-option [value]="type">{{ CATEGORY_TYPE_TEXT_MAP[type] }}</ion-picker-column-option>
            }
          }
        </app-picker-column>

        <app-picker-column [formControl]="form.controls.value">
          @for (value of MAX_FILL_LENGTH | fill; track $index) {
            <ion-picker-column-option [value]="$index + 1">{{ $index + 1 }}</ion-picker-column-option>
          }
        </app-picker-column>
      </ion-picker>
    </div>

    <div class="flex flex-col items-center gap-1">
      <ion-badge>
        {{ (actionToEdit() ? 'Update' : 'Add') | uppercase }}
      </ion-badge>
      @if (actionToEdit()) {
        <app-chip [action]="actionToEdit()"
                  [lineThrough]="true">
        </app-chip>
        <ion-icon name="arrow-down"></ion-icon>
      }
      <app-chip [action]="$any({
        category: form.controls.category.value,
        type: form.controls.type.value,
        value: form.controls.value.value,
      })">
      </app-chip>
    </div>
  </div>

  <ion-fab-button>
    @if (actionToEdit()) {
      <ion-icon name="checkmark" (click)="onUpdateAction()"></ion-icon>
    } @else {
      <ion-icon name="add" (click)="onAddAction()"></ion-icon>
    }
  </ion-fab-button>
</div>
